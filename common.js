///// 一覧表示データ取得function getItemList() {    var p_list = localStorage.getItem("memo_list");    if (p_list) {        return JSON.parse(p_list);    } else {        return new Array();    }}///// 照会表示データ取得function getItem(x_key) {    var p_list = getItemList();     if(p_list) {        for (var i in p_list) {            alert("getItem x_key:"+x_key);            alert("p_list.id:" + p_list[i].id);            if(p_list[i].id = x_key) {                alert("match");                var p_item = new Array();                p_item.push({                    id:p_list[i].id                    , title:p_list[i].title                    , description:p_list[i].description                    , important:p_list[i].important                    , endflg:p_list[i].endflg                    , startdate:p_list[i].startdate                     , enddate:p_list[i].enddate                });                return p_item;            }        }    }}///// メモ削除function deleteItem(x_key) {    var p_list = getItemList();    for (var i in p_list) {        if (p_list[i].id == x_key) {            p_list.splice(i, 1);  //ID該当の行を1行削除            break;  // Quit for loop when found        }    }    saveItemList(p_list);}///// メモ追加function addItem(x_data) {    alert("addItem");    var p_id = x_data.id;     alert("p_id:"+p_id);    if (p_id) {        alert("update");        //更新の場合（一覧から引き継いだIDが存在する場合）、更新前データをリストから削除してから新規追加する        deleteItem(p_id);    }        alert("addItem2");    var p_list = getItemList();    var p_time = new Date().getTime();        alert("登録値："        + "id:"+p_time        + ",title:"+x_data[0].title        + ",description:"+ x_data[0].description        + ",endflg:"+ x_data[0].endflg        + ",startdate:"+ x_data[0].startdate        + ",enddate:"+ x_data[0].enddate                );    p_list.push({          id: p_time        , title: x_data[0].title        , description: x_data[0].description        , endflg: x_data[0].endflg        , startdate: x_data[0].startdate        , enddate: x_data[0].enddate        });    saveItemList(p_list);}///// データ保存function saveItemList(x_item) {    try {        localStorage.setItem("memo_list", JSON.stringify(x_item));    } catch (e) {        alert('Error saving to storage.');        throw e;    }}///// フォームデータ取得function getFormValue() {        alert("getFormValue s");        var p_id            = $("#todo-id").val();        var p_description   = $("#todo-description").val();        var p_important     = $("[name='todo-important']").filter(':checked').val();        var p_endflg        = $("#todo-endflg").val();        var p_startdate     = $("#todo-startdate").val();        var p_enddate       = $("#todo-enddate").val();        alert('取得値：'        + '/title:'+ p_title        + '/id:'+ p_id        + '/description:'+ p_description        + '/important' + p_important        + '/endflg' + p_endflg        + '/startdate' + p_startdate        + '/enddate' + p_enddate);        var p_data = new Array();        p_data.push({                id:p_id                , title:p_title                , description:p_description                , important:p_important                , endflg:p_endflg                , startdate:p_startdate                 , enddate:p_enddate                });        alert("getFormValue e");        return p_date;}///// フォームバリューセットfunction setFormValue(x_item) {    alert('setFormValue s クリア後取得値：'        + '/id:'+ x_item[0].id        + '/title:'+ x_item[0].title        + '/description:'+ x_item[0].description//        + '/important' + p_important        + '/endflg' + x_item[0].endflg        + '/startdate' + x_item[0].startdate        + '/enddate' + x_item[0].enddate);        $("#todo-id").val(x_item[0].id);        $("#todo-title").val(x_item[0].title);        $("#todo-description").val(x_item[0].description);      //        $("[name='todo-important']").filter(':checked').val();        $("#todo-endflg").val(x_item[0].endflg);        $("#todo-startdate").val(x_item[0].startdate);        $("#todo-enddate").val(x_item[0].enddate);    alert("setFormValue e");}///// フォームバリュークリアfunction clearFormValue() {        alert("clearFormValue s");        $("#todo-id").val("");        $("#todo-title").val("");        $("#todo-description").val("");//        $("#radio-choice-3").prop({'checked':'checked'})    //通常//        $("input:[name=todo-important]").attr("checked",false); //        $("inpur:[name=todo-important]").val(['3']);        alert("additemaft3");//        $("#todo-endflg").prop({'checked':false})        $("#todo-startdate").val("");        $("#todo-enddate").val("");                //ログ出力        p_id            = $("#todo-id").val();        p_title         = $("#todo-title").val();        p_description   = $("#todo-description").val();//        p_important   = $("input:[name='todo-important']").filter(':checked').val();        p_important     = $("#todo-important").val();        p_endflg        = $("#todo-endflg").val();        p_startdate     = $("#todo-startdate").val();        p_enddate       = $("#todo-enddate").val();        alert('clearFormValue e クリア後取得値：'        + '/id:'+ p_id        + '/title:'+ p_title        + '/description:'+ p_description        + '/important' + p_important        + '/endflg' + p_endflg        + '/startdate' + p_startdate        + '/enddate' + p_enddate);}// agent//function getAgent () {//    var agent = navigator.userAgent,ua = '';//	if(agent.search(/iPhone/) != -1){//		ua = 'ios'//	}else if(agent.search(/Android/) != -1){//		ua = 'android'//	}	//};