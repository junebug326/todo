//common.js//共通処理///// 一覧表示データ取得function getItemList() {    var p_list = localStorage.getItem("memo_list");    if (p_list) {        return JSON.parse(p_list);    } else {        return new Array();    }}///// 照会表示データ取得function getItem(x_key) {    var p_list = getItemList();     if(p_list) {        for (var i in p_list) {            if(p_list[i].id == x_key) {                var p_item = new Array();                p_item.push({                    id:p_list[i].id                    , title:p_list[i].title                    , description:p_list[i].description                    , important:p_list[i].important                    , startdate:p_list[i].startdate                 });                return p_item;            }        }    }}///// メモ削除function deleteItem(x_key) {//    localStorage.removeItem(x_key)    var p_list = getItemList();    for (var i in p_list) {        if (p_list[i].id == x_key) {            p_list.splice(i, 1);  //ID該当の行を1行削除            break;        }    }    saveItemList(p_list);}///// メモ追加function addItem(x_data) {    var p_id = x_data[0].id;     if (p_id) {        //更新の場合（一覧から引き継いだIDが存在する場合）、更新前データをリストから削除してから新規追加する        deleteItem(p_id);    }    var p_list = getItemList();    var p_time = new Date().getTime();    p_list.push({          id: p_time        , title: x_data[0].title        , description: x_data[0].description        , important: x_data[0].important                , startdate: x_data[0].startdate        });    saveItemList(p_list);}///// データ保存function saveItemList(x_item) {    try {        localStorage.setItem("memo_list", JSON.stringify(x_item));    } catch (e) {        alert('Error saving to storage.');        throw e;    }}///// フォームデータ取得function getFormValue() {    var p_id            = $("#todo-id").val();    var p_title         = $("#todo-title").val();    var p_description   = $("#todo-description").val();    var p_important     = $("[name='todo-important']").filter(':checked').val();    var p_startdate     = $("#todo-startdate").val();    var p_data = new Array();    p_data.push({            id:p_id            , title:p_title            , description:p_description            , important:p_important            , startdate:p_startdate         });    return p_data;}///// フォームバリューセットfunction setFormValue(x_item) {    $("#todo-id").val(x_item[0].id);    $("#todo-title").val(x_item[0].title);    $("#todo-description").val(x_item[0].description);    //再描画時の不具合のため引数無しでcheckboxradioをコールしてからリフレッシュを実施    $("[name='todo-important']").val([x_item[0].important]).checkboxradio();    $("[name='todo-important']").checkboxradio('refresh',true);            $("#todo-startdate").val(x_item[0].startdate);}///// フォームバリュークリアfunction clearFormValue() {    $("#todo-id").val("");    $("#todo-title").val("");    $("#todo-description").val("");            $("[name='todo-important']").val(['2']).checkboxradio();    $("[name='todo-important']").checkboxradio('refresh',true);    $("#todo-startdate").val("");}