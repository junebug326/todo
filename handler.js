//handler.js//初期化処理、イベントハンドラ///// トップページを表示しますfunction showTopPage() {    showTopPage(null);};function showTopPage(x_sort) {    $("#TopListView").empty();    var p_list = getItemList();    for (var i in p_list) {        var p_memo = p_list[i];                var p_date = new Date(p_memo.startdate);        var p_startdate;        if (p_memo.startdate) {            p_startdate = p_date.getFullYear() + "/" + (p_date.getMonth() + 1) + "/" + p_date.getDate();        } else {            //未入力の場合ハイフンをセット            p_startdate = "—";         }                var p_important = parseInt(p_memo.important);        var p_star = "";        if (isFinite(p_important)) {            for (var j=0; j < p_important; j++){                p_star+="★";            }        }        //一覧表示部品作成        $li = $("<li><a href='#' class='showItem'><h3></h3><p></p><small></small></a><a href='#' class='deleteItem'>Delete</a></li>");        $li.data("id", p_memo.id);          //ID        $li.find("h3").text(p_startdate);   //開始予定日        $li.find("p").text(p_memo.title);   //タイトル        $li.find("small").text(p_star);     //重要度        $("#TopListView").prepend($li);    }    if (p_list.length == 0) {        //0件の場合        $li = $("<li>No memo found</li>");        $("#TopListView").prepend($li);    }    $("#TopListView").listview("refresh");}////終了分の判定処理を行います//function checkEndData(x_sort,x_endflg,x_enddate) {//    var p_date = new Date();//    var p_currentdate = p_date.getFullYear()//    + "/" + p_date.getMonth() + 1//    + "/" + p_date.getDate()//    if (x_sort == "end") {//        if (x_endflg == "1" || x_enddate > p_currentdate) {//            return true;//        } else {//            return false;//        }//    } else {//        if (x_endflg == "1" || x_enddate > p_currentdate) {//            return false;//        } else {//            return true;//        }//    }//}///// 追加ボタン押下後の処理function onAddBtn() {    // フォームデータのクリア    clearFormValue();    $.mobile.changePage("#AddPage", { reverse: true });}///// 保存ボタン押下後の処理function onSaveBtn() {    var p_title = $("#todo-title").val();    if (p_title != '') {        //フォームデータ取得        var p_data = getFormValue();        //local storageに保存        addItem(p_data);        // フォームデータのクリア        clearFormValue();        // トップページ更新        showTopPage();    }        $.mobile.changePage("#TopPage", { reverse: true });}///// リスト項目押下後の処理function onShowLink() {    var $li = $(this).parents("li");    var p_id = $li.data("id");    var p_item = getItem(p_id);    if (p_item) {        //フォームデータのセット        setFormValue(p_item);    }    $.mobile.changePage("#AddPage");}///// 削除押下後の処理function onDeleteLink() {    if (!confirm("本当に削除しますか?")) {      return;    }    var $li = $(this).parents("li");    var p_id = $li.data("id");    deleteItem(p_id);    showTopPage();        $.mobile.changePage("#TopPage", { reverse: true });}///// アプリ起動時の処理function onReady() {    //初期化    showTopPage();    //イベントハンドラ登録        //一覧    //追加ボタン    $("#addBtn").click(onAddBtn);    //照会    $("#TopListView a.showItem").live("click", onShowLink);    //削除    $("#TopListView a.deleteItem").live("click", onDeleteLink);    //ソート(未実装)//    $("#sortDate").live("click", {sort:'date'}, showTopPage);//    $("#sortImportant").live("click", {sort:'important'}, showTopPage);//    $("#sortEnd").live("click", {sort:'end'}, showTopPage);        //照会    //保存ボタン    $("#saveBtn").click(onSaveBtn);        monaca.splashScreen.hide();}//アプリ起動時の処理$(onReady); // on DOMContentLoaded